# Joomla Hacking

## Descubrimiento/Huella

```bash
curl -s http://dev.inlanefreight.local/ | grep Joomla
```

El archivo `robots.txt` de un sitio de Joomla a menudo se verá así:

```bash
# If the Joomla site is installed within a folder
# eg www.example.com/joomla/ then the robots.txt file
# MUST be moved to the site root
# eg www.example.com/robots.txt
# AND the joomla folder name MUST be prefixed to all of the
# paths.
# eg the Disallow rule for the /administrator/ folder MUST
# be changed to read
# Disallow: /joomla/administrator/
#
# For more information about the robots.txt standard, see:
# https://www.robotstxt.org/orig.html

User-agent: *
Disallow: /administrator/
Disallow: /bin/
Disallow: /cache/
Disallow: /cli/
Disallow: /components/
Disallow: /includes/
Disallow: /installation/
Disallow: /language/
Disallow: /layouts/
Disallow: /libraries/
Disallow: /logs/
Disallow: /modules/
Disallow: /plugins/
Disallow: /tmp/
```

Podemos tomar huellas dactilares de la versión de Joomla si el archivo `README.txt` está presente.

```bash
curl -s http://dev.inlanefreight.local/README.txt | head -n 5
```

En ciertas instalaciones de Joomla, es posible que podamos tomar las huellas digitales de la versión de los archivos de JavaScript en el directorio `media/system/js/` o navegando hasta `administrator/manifests/files/joomla.xml`.

```bash
curl -s http://dev.inlanefreight.local/administrator/manifests/files/joomla.xml | xmllint --format -
```

## ENUMERACION

### DROOPSCAN

instalacion:

```bash
sudo pip3 install droopescan
```

escaneo:

```bash
droopescan scan joomla --url http://dev.inlanefreight.local/
```

### JOOMLASCAN

instalacion:

```bash
sudo python2.7 -m pip install urllib3
sudo python2.7 -m pip install certifi
sudo python2.7 -m pip install bs4
```

escaneo:

```bash
python2.7 joomlascan.py -u http://dev.inlanefreight.local
```

## BRUTE FORCE LOGIN

El login del CMS normalmente esta en la siguiente URI: `/administrator/index.php`:

La cuenta de administrador predeterminada en las instalaciones de Joomla es `admin`, pero la contraseña se configura en el momento de la instalación, por lo que la única forma en que podemos esperar ingresar al back-end de administración es si la cuenta está configurada con una contraseña muy débil/común y podemos obtener con algunas conjeturas o fuerza bruta ligera. Podemos usar este [script](https://github.com/ajnik/joomla-bruteforce) para intentar forzar el inicio de sesión por fuerza bruta.

```bash
sudo python3 joomla-brute.py -u http://dev.inlanefreight.local -w /usr/share/metasploit-framework/data/wordlists/http_default_pass.txt -usr admin
```